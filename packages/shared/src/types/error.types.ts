export enum ErrorCode {
  // General
  INTERNAL_ERROR = 'INTERNAL_ERROR',
  VALIDATION_ERROR = 'VALIDATION_ERROR',
  UNAUTHORIZED = 'UNAUTHORIZED',
  PERMISSION_DENIED = 'PERMISSION_DENIED',
  RESOURCE_NOT_FOUND = 'RESOURCE_NOT_FOUND',
  RESOURCE_ALREADY_EXISTS = 'RESOURCE_ALREADY_EXISTS',

  // Task specific
  TASK_BLOCKED = 'TASK_BLOCKED',
  TASK_INVALID_STATE = 'TASK_INVALID_STATE',
  TASK_MISSING_ASSIGNEES = 'TASK_MISSING_ASSIGNEES',
  TASK_REQUIRES_INSPECTION = 'TASK_REQUIRES_INSPECTION',

  // Inspection specific
  INSPECTION_INVALID_STATE = 'INSPECTION_INVALID_STATE',
  INSPECTION_INCOMPLETE_CHECKLIST = 'INSPECTION_INCOMPLETE_CHECKLIST', // INV-5
  INSPECTION_MISSING_PHOTOS = 'INSPECTION_MISSING_PHOTOS', // INV-4

  // Issue specific
  ISSUE_INVALID_STATE = 'ISSUE_INVALID_STATE',

  // Delivery specific
  DELIVERY_INVALID_STATE = 'DELIVERY_INVALID_STATE',

  // Decision specific
  DECISION_INVALID_STATE = 'DECISION_INVALID_STATE',
  DECISION_ALREADY_APPROVED = 'DECISION_ALREADY_APPROVED',
}

export class AppError extends Error {
  constructor(
    public code: ErrorCode,
    message: string,
    public statusCode: number = 500,
    public details?: any,
  ) {
    super(message);
    this.name = 'AppError';
  }
}
